<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Forest Park Resort | –•–∞—Ä–∫—ñ–≤</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

  <style>
    :root {
      --primary-rgb: 35, 60, 50;
      --primary: rgb(var(--primary-rgb));
      --accent: #c9a66b;
      --bg: #fdfdfc;
      --text: #4a4a4a;
      --white: #fff;
      --shadow: 0 5px 20px rgba(35, 60, 50, 0.15);
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Montserrat', sans-serif;
      margin: 0; padding: 0; background-color: var(--bg); color: var(--text);
      line-height: 1.5; overflow-x: hidden;
    }

    h1, h2, h3 { font-family: 'Merriweather', serif; color: var(--primary); }

    .top-bar-wrapper {
      position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    header {
      background: var(--primary);
      color: var(--white); padding: 5px 30px;
      display: flex; justify-content: space-between; align-items: center;
    }

    .logo-container { display: flex; align-items: center; gap: 10px; }
    .logo-img { height: 35px; filter: brightness(0) invert(1); }
    .site-info h1 { color: var(--white); margin: 0; font-size: 16px; letter-spacing: 0.5px; }
    .header-contacts { font-size: 12px; text-align: right; opacity: 0.9; line-height: 1.2; }
    .header-contacts p { margin: 0; }

    nav {
      background-color: var(--white); padding: 0 30px; display: flex; justify-content: center;
      border-bottom: 2px solid var(--accent); height: 50px; align-items: center; position: relative;
    }

    .menu { list-style: none; display: flex; margin: 0; padding: 0; flex-wrap: wrap; justify-content: center; }
    .menu a { display: block; color: var(--primary); text-decoration: none; padding: 0 15px; font-weight: 600; text-transform: uppercase; font-size: 11px; letter-spacing: 1px; transition: 0.3s; line-height: 50px; }
    .menu a:hover { color: var(--accent); }

    .nav-book-btn {
      position: absolute; right: 30px; background-color: var(--primary); color: white;
      border: none; padding: 8px 20px; border-radius: 20px; font-weight: 600; font-size: 11px;
      text-transform: uppercase; cursor: pointer; transition: 0.3s;
    }
    .nav-book-btn:hover { background-color: var(--accent); color: var(--primary); }

    .section {
      min-height: auto; width: 100%; display: flex; flex-direction: column;
      justify-content: center; align-items: center; box-sizing: border-box;
      padding: 90px 20px 40px 20px; position: relative;
    }

    .hero {
      height: 100vh;
      min-height: 700px;
      background: linear-gradient(rgba(35, 60, 50, 0.3), rgba(35, 60, 50, 0.5)), url('main.png');
      background-size: cover;
      background-position: center;
      display: flex; align-items: center; justify-content: center;
      padding-top: 150px; padding-bottom: 40px; box-sizing: border-box;
    }

    .main-content-wrapper {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      width: 90%;
      max-width: 1200px;
      background: rgba(14, 34, 27, 0.85);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,0.15);
      padding: 30px;
      border-radius: 20px;
      gap: 40px;
      opacity: 0;
      transform: translateY(40px);
      transition: opacity 1s ease-out, transform 1s ease-out;
      max-height: calc(100vh - 80px);
    }

    .main-content-wrapper.visible { opacity: 1; transform: translateY(0); }

    .hero-text-side { flex: 1; text-align: left; color: white; }
    .hero-text-side h2 { color: var(--accent); font-size: 36px; margin-bottom: 15px; line-height: 1.2; }

    .btn-hero {
      background-color: var(--accent); color: rgb(14, 34, 27); border: none;
      padding: 12px 30px; font-weight: bold; text-transform: uppercase; cursor: pointer;
      transition: 0.3s; border-radius: 30px; font-size: 13px;
      margin-top: 10px;
    }
    .btn-hero:hover { background-color: white; color: var(--primary); }

    .hero-slider-side {
      flex: 1.2;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 1.5s ease;
    }
    .hero-slider-side.visible { opacity: 1; }

    .slider-complex { display: flex; align-items: center; justify-content: center; gap: 15px; width: 100%; }
    .slider-window { overflow: hidden; width: 100%; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.4); position: relative; background: #000; aspect-ratio: 16/9; }
    .slider-track { display: flex; height: 100%; transition: transform 0.5s ease-in-out; }
    .slide { min-width: 100%; height: 100%; cursor: zoom-in; }
    .slide img { width: 100%; height: 100%; object-fit: cover; display: block; }

    .slider-btn-ext {
      background-color: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);
      width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 18px;
      display: flex; align-items: center; justify-content: center; transition: 0.3s; flex-shrink: 0;
    }
    .slider-btn-ext:hover { background-color: var(--accent); color: var(--primary); transform: scale(1.1); border-color: var(--accent); }

    .indicators-container { margin-top: 15px; display: flex; gap: 8px; }
    .indicator { width: 10px; height: 10px; background-color: rgba(255,255,255,0.3); border-radius: 50%; cursor: pointer; transition: 0.3s; }
    .indicator.active { background-color: var(--accent); transform: scale(1.2); }

    .lightbox { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(14, 34, 27, 0.95); z-index: 20000; justify-content: center; align-items: center; }
    .lightbox-content-wrapper { position: relative; display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; }
    .lightbox img { max-width: 85%; max-height: 85%; border: 2px solid var(--white); border-radius: 5px; box-shadow: 0 0 30px rgba(0,0,0,0.8); }
    .lightbox-close { position: absolute; top: 20px; right: 30px; color: white; font-size: 40px; cursor: pointer; font-weight: bold; z-index: 20002; }
    .lightbox-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.1); color: white; border: none; font-size: 30px; padding: 20px; cursor: pointer; transition: 0.3s; z-index: 20001; }
    .lightbox-btn:hover { background: rgba(255,255,255,0.3); }
    .lb-prev { left: 20px; }
    .lb-next { right: 20px; }

    .section-title { text-align: center; font-size: 32px; margin-bottom: 30px; position: relative; width: 100%; }
    .table-container { width: 100%; max-width: 900px; overflow-x: auto; background: white; border-radius: 10px; box-shadow: var(--shadow); padding: 20px; }
    table { width: 100%; border-collapse: collapse; font-size: 14px; }
    th, td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
    th { background-color: var(--primary); color: white; text-transform: uppercase; font-weight: 600; font-size: 12px; letter-spacing: 1px; }
    td:last-child { font-weight: bold; color: var(--primary); text-align: right; }
    th:last-child { text-align: right; }

    .rooms-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; width: 100%; max-width: 1200px; }
    .room-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: var(--shadow); transition: transform 0.3s; border: 1px solid #eee; display: flex; flex-direction: column; height: 100%; }
    .room-card:hover { transform: translateY(-5px); }
    .room-img { height: 160px; background-size: cover; background-position: center; }
    .room-info { padding: 15px 20px; flex-grow: 1; display: flex; flex-direction: column; }
    .room-info h3 { margin-top: 0; margin-bottom: 8px; font-size: 18px; }
    .room-info p { font-size: 13px; margin-bottom: 10px; line-height: 1.4; color: #666; }
    .price { color: var(--primary); font-size: 16px; font-weight: bold; margin-top: auto; margin-bottom: 10px; display: block; }
    .btn-card { width: 100%; padding: 8px 0; background-color: transparent; border: 1px solid var(--primary); color: var(--primary); border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 12px; text-transform: uppercase; transition: 0.3s; }
    .btn-card:hover { background-color: var(--primary); color: white; }

    .services-container { display: flex; flex-wrap: nowrap; gap: 40px; align-items: center; max-width: 1100px; }
    .services-container.reverse { flex-direction: row-reverse; }
    .service-text { flex: 1; }
    .service-img { flex: 1; height: 100%; display: flex; align-items: center; }
    .service-img img { width: 100%; max-height: 350px; border-radius: 15px; box-shadow: var(--shadow); object-fit: cover; }
    .service-text h3 { font-size: 28px; margin-bottom: 15px; }
    .service-text p { font-size: 15px; margin-bottom: 15px; }
    .service-text li { margin-bottom: 8px; padding-left: 25px; position: relative; font-size: 15px; }
    .service-text li::before { content: "‚ú¶"; color: var(--accent); position: absolute; left: 0; font-size: 16px; }

    .contacts-wrapper { background-color: var(--primary); color: white; padding: 40px; border-radius: 20px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; max-width: 600px; }
    .contacts-content h3 { color: var(--accent); margin-top: 0; font-size: 28px; margin-bottom: 15px; }
    .contacts-content p { color: #e0e0e0; font-size: 16px; margin: 10px 0; }
    .contacts-content span { display: block; margin-top: 15px; font-weight: bold; color: var(--white); font-size: 18px; }
    footer { height: auto; min-height: 60px; background: var(--primary); color: #8fa398; padding: 15px; text-align: center; font-size: 12px; }

    .custom-alert-overlay {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.6); z-index: 3000; justify-content: center; align-items: center;
    }
    .custom-alert-box {
      background: white; padding: 30px; width: 90%; max-width: 420px; border-radius: 15px;
      text-align: center; border-top: 5px solid var(--accent); position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    .alert-close-btn { position: absolute; top: 10px; right: 15px; font-size: 20px; cursor: pointer; color: #aaa; }
    .alert-close-btn:hover { color: var(--primary); }
    .custom-alert-box h3 { color: var(--primary); margin-top: 0; font-size: 22px; }
    .custom-alert-box p { color: #555; margin: 15px 0 5px; font-size: 14px; white-space: pre-line; }

    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(35, 60, 50, 0.85); z-index: 2000; justify-content: center; align-items: center; padding: 10px; }
    .modal-content { background: white; padding: 20px; width: 100%; max-width: 450px; border-radius: 10px; position: relative; border-top: 4px solid var(--accent); max-height: 90vh; overflow-y: auto; box-sizing: border-box; }
    .close-btn { position: absolute; top: 10px; right: 15px; font-size: 22px; cursor: pointer; color: #aaa; transition: 0.3s; }
    .close-btn:hover { color: var(--primary); }
    .form-title { text-align: center; margin-top: 0; color: var(--primary); font-size: 20px; margin-bottom: 15px; }
    .form-row { display: flex; gap: 10px; margin-bottom: 10px; }
    .form-group { margin-bottom: 10px; flex: 1; }
    .form-group label { display: block; margin-bottom: 4px; font-weight: 600; font-size: 11px; color: var(--text); }
    .form-group input, .form-group select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; font-family: 'Montserrat', sans-serif; font-size: 13px; }
    .flatpickr-calendar { font-family: 'Montserrat', sans-serif; border: none !important; box-shadow: 0 15px 40px rgba(0,0,0,0.3) !important; width: 260px !important; font-size: 12px !important; z-index: 99999 !important; }
    .checkin-date-marker { background-color: rgba(35, 60, 50, 0.1) !important; border: 2px solid var(--primary) !important; color: var(--primary) !important; font-weight: bold !important; }
    ::placeholder { color: #bbb; opacity: 1; }
    .checkbox-group { margin-bottom: 15px; background: #f9f9f9; padding: 8px; border-radius: 5px; }
    .checkbox-label { display: flex; align-items: center; font-size: 12px; margin-bottom: 4px; cursor: pointer; }
    .checkbox-label input { width: auto; margin-right: 8px; }
    .btn-row { display: flex; gap: 10px; }
    .btn-submit { width: 100%; padding: 10px; background-color: var(--primary); color: white; border: none; border-radius: 30px; font-weight: bold; font-size: 14px; cursor: pointer; transition: 0.3s; flex: 2; }
    .btn-submit:hover { background-color: var(--accent); color: var(--primary); }
    .btn-clear { flex: 1; padding: 10px; background-color: #e0e0e0; color: #333; border: none; border-radius: 30px; font-weight: bold; font-size: 14px; cursor: pointer; transition: 0.3s; }
    .btn-clear:hover { background-color: #ccc; }

    @media (max-width: 900px) {
      .nav-book-btn { position: static; margin-top: 10px; }
      nav { height: auto; padding-bottom: 10px; flex-direction: column; }
      .rooms-grid { grid-template-columns: 1fr; }
      .services-container, .services-container.reverse { flex-direction: column; }
      .section { height: auto; padding: 100px 20px 40px 20px; }
      .hero { height: auto; padding-top: 120px; }
      .main-content-wrapper { flex-direction: column; text-align: center; max-height: none; }
      .hero-text-side { width: 100%; text-align: center; }
      .hero-slider-side { width: 100%; }
      .slider-btn-ext { width: 30px; height: 30px; font-size: 14px; }
    }
  </style>
</head>

<body>
  <div class="top-bar-wrapper">
    <header>
      <div class="logo-container">
        <img src="https://cdn-icons-png.flaticon.com/512/2919/2919643.png" alt="Logo" class="logo-img">
        <div class="site-info">
          <h1>Forest Park Resort</h1>
        </div>
      </div>
      <div class="header-contacts">
        <p>üå≤ Premium Eco-Resort</p>
        <p>üìû +38 (057) 700-00-01</p>
      </div>
    </header>

    <nav>
      <ul class="menu">
        <li><a href="#home">–ì–æ–ª–æ–≤–Ω–∞</a></li>
        <li><a href="#cottages">–ê–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∏</a></li>
        <li><a href="#prices">–¶—ñ–Ω–∏</a></li>
        <li><a href="#nature">–†–µ–ª–∞–∫—Å</a></li>
        <li><a href="#kitchen">–†–µ—Å—Ç–æ—Ä–∞–Ω</a></li>
        <li><a href="#contacts">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a></li>
      </ul>
      <button class="nav-book-btn" id="navBookBtn">–ó–∞–±—Ä–æ–Ω—é–≤–∞—Ç–∏</button>
    </nav>
  </div>

  <div id="home" class="hero">
    <div class="main-content-wrapper" id="homeContent">
      <div class="hero-text-side">
        <h2>–ú–∏—Å—Ç–µ—Ü—Ç–≤–æ –≤—ñ–¥–ø–æ—á–∏–Ω–∫—É<br>—Å–µ—Ä–µ–¥ –ø—Ä–∏—Ä–æ–¥–∏</h2>

        <ul class="features-list">
          <li><span><strong>üå≤ –õ–æ–∫–∞—Ü—ñ—è:</strong> –ó–∞–ø–æ–≤—ñ–¥–Ω–∏–π —Ö–≤–æ–π–Ω–∏–π –ª—ñ—Å ‚Äî –ø—Ä–∏—Ä–æ–¥–Ω–∏–π —ñ–Ω–≥–∞–ª—è—Ç–æ—Ä.</span></li>
          <li><span><strong>üè° –ü—Ä–∏–≤–∞—Ç–Ω—ñ—Å—Ç—å:</strong> –û–∫—Ä–µ–º—ñ –∫–æ—Ç–µ–¥–∂—ñ. –°—É—Å—ñ–¥–∏ ‚Äî –ª–∏—à–µ –±—ñ–ª–∫–∏ —Ç–∞ –ø—Ç–∞—Ö–∏.</span></li>
          <li><span><strong>üî• –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞:</strong> –ö–∞–º—ñ–Ω–∏, –ø–∞–Ω–æ—Ä–∞–º–Ω—ñ –≤—ñ–∫–Ω–∞, —Ç–∏—à–∞.</span></li>
          <li><span><strong>üçΩ –°–µ—Ä–≤—ñ—Å:</strong> –†—É–º-—Å–µ—Ä–≤—ñ—Å 24/7 —Ç–∞ —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥.</span></li>
        </ul>

        <button class="btn-hero" id="heroBtn">–û–±—Ä–∞—Ç–∏ –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∏</button>
      </div>

      <div id="gallery-block" class="hero-slider-side">
        <div class="slider-complex">
          <button class="slider-btn-ext" id="prevSlideBtn">&#10094;</button>
          <div class="slider-window">
            <div class="slider-track" id="sliderTrack">
              <div class="slide" data-index="0"><img src="lobby-bar.jpg" alt="–õ–æ–±—ñ-–±–∞—Ä"></div>
              <div class="slide" data-index="1"><img src="restoraunt.jpg" alt="–†–µ—Å—Ç–æ—Ä–∞–Ω"></div>
              <div class="slide" data-index="2"><img src="biblioteka.jpg" alt="–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞"></div>
              <div class="slide" data-index="3"><img src="spa-out.jpg" alt="SPA –∑–æ–Ω–∞"></div>
            </div>
          </div>
          <button class="slider-btn-ext" id="nextSlideBtn">&#10095;</button>
        </div>
        <div class="indicators-container" id="indicators"></div>
        <p style="font-size: 11px; color: #ccc; margin-top: 10px;">* –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ —Ñ–æ—Ç–æ –¥–ª—è –∑–±—ñ–ª—å—à–µ–Ω–Ω—è</p>
      </div>
    </div>
  </div>

  <section id="cottages" class="section">
    <h2 class="section-title">–ö–æ–ª–µ–∫—Ü—ñ—è –ù–æ–º–µ—Ä—ñ–≤</h2>
    <div class="rooms-grid">
      <div class="room-card">
        <div class="room-img" style="background-image: url('room1.png');"></div>
        <div class="room-info">
          <h3>Scandi Studio</h3>
          <p>–°–∫–∞–Ω–¥–∏–Ω–∞–≤—Å—å–∫–∏–π –º—ñ–Ω—ñ–º–∞–ª—ñ–∑–º. –ü–∞–Ω–æ—Ä–∞–º–Ω–µ –≤—ñ–∫–Ω–æ-–Ω—ñ—à–∞ –¥–ª—è —ñ–¥–µ–∞–ª—å–Ω–∏—Ö —Ä–∞–Ω–∫—ñ–≤.</p>
          <span class="price">1 400 ‚Ç¥ / –¥–æ–±—É</span>
          <button class="btn-card room-book-btn" data-room="Scandi Studio">–ó–∞–±—Ä–æ–Ω—é–≤–∞—Ç–∏</button>
        </div>
      </div>

      <div class="room-card">
        <div class="room-img" style="background-image: url('room3.png');"></div>
        <div class="room-info">
          <h3>Forest Spa Suite</h3>
          <p>–†–æ–º–∞–Ω—Ç–∏—á–Ω–∏–π –∫–æ—Ç–µ–¥–∂ –¥–ª—è –¥–≤–æ—Ö. –û–∫—Ä–µ–º–∞ –≤–∞–Ω–Ω–∞ —á–∞—à–∞ –±—ñ–ª—è –ø–∞–Ω–æ—Ä–∞–º–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞.</p>
          <span class="price">2 100 ‚Ç¥ / –¥–æ–±—É</span>
          <button class="btn-card room-book-btn" data-room="Forest Spa Suite">–ó–∞–±—Ä–æ–Ω—é–≤–∞—Ç–∏</button>
        </div>
      </div>

      <div class="room-card">
        <div class="room-img" style="background-image: url('room2.png');"></div>
        <div class="room-info">
          <h3>Family Villa</h3>
          <p>–ü—Ä–æ—Å—Ç–æ—Ä–∞ –≤—ñ—Ç–∞–ª—å–Ω—è –∑ –∂–∏–≤–∏–º –≤–æ–≥–Ω–µ–º (–∫–∞–º—ñ–Ω), –∫–∞–º'—è–Ω–µ –æ–∑–¥–æ–±–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞—Ç–∏—à–æ–∫.</p>
          <span class="price">3 500 ‚Ç¥ / –¥–æ–±—É</span>
          <button class="btn-card room-book-btn" data-room="Family Villa">–ó–∞–±—Ä–æ–Ω—é–≤–∞—Ç–∏</button>
        </div>
      </div>
    </div>
  </section>

  <section id="prices" class="section" style="background-color: #fcfcfc;">
    <h2 class="section-title">–ü—Ä–∞–π—Å-–ª–∏—Å—Ç –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –ø–æ—Å–ª—É–≥</h2>
    <div class="table-container">
      <table>
        <thead>
          <tr><th>–ü–æ—Å–ª—É–≥–∞</th><th>–û–ø–∏—Å</th><th>–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å</th><th>–¶—ñ–Ω–∞ (–≥—Ä–Ω)</th></tr>
        </thead>
        <tbody>
          <tr><td>–û—Ä–µ–Ω–¥–∞ –∫–≤–∞–¥—Ä–æ—Ü–∏–∫–ª—ñ–≤</td><td>–ï–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–∞ –ø—Ä–æ–≥—É–ª—è–Ω–∫–∞ –ª—ñ—Å–æ–≤–∏–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏</td><td>1 –≥–æ–¥–∏–Ω–∞</td><td>800</td></tr>
          <tr><td>–†–æ—Å—ñ–π—Å—å–∫–∞ –ª–∞–∑–Ω—è</td><td>–õ–∞–∑–Ω—è –Ω–∞ –¥—Ä–æ–≤–∞—Ö –∑ –≤–∏—Ö–æ–¥–æ–º –¥–æ –æ–∑–µ—Ä–∞ (–¥–æ 6 –æ—Å—ñ–±)</td><td>1 –≥–æ–¥–∏–Ω–∞</td><td>600</td></tr>
          <tr><td>SPA-–º–∞—Å–∞–∂</td><td>–†–æ–∑—Å–ª–∞–±–ª—è—é—á–∏–π –º–∞—Å–∞–∂ –≤—Å—å–æ–≥–æ —Ç—ñ–ª–∞</td><td>45 —Ö–≤</td><td>950</td></tr>
          <tr><td>–û—Ä–µ–Ω–¥–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥—ñ–≤</td><td>–ì—ñ—Ä—Å—å–∫—ñ –≤–µ–ª–æ—Å–∏–ø–µ–¥–∏ –¥–ª—è –ø—Ä–æ–≥—É–ª—è–Ω–æ–∫</td><td>–î–µ–Ω—å</td><td>300</td></tr>
          <tr><td>–†–∏–±–æ–ª–æ–≤–ª—è</td><td>–û—Ä–µ–Ω–¥–∞ –≤—É–¥–∫–∏ —Ç–∞ –º—ñ—Å—Ü—è –Ω–∞ –ø—ñ—Ä—Å—ñ</td><td>–î–µ–Ω—å</td><td>250</td></tr>
          <tr><td>–¢—Ä–∞–Ω—Å—Ñ–µ—Ä</td><td>–Ü–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏–π —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä –∑ —Ü–µ–Ω—Ç—Ä—É –•–∞—Ä–∫–æ–≤–∞</td><td>‚Äî</td><td>400</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section id="nature" class="section" style="background-color: white;">
    <h2 class="section-title">–ì–∞—Ä–º–æ–Ω—ñ—è & –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è</h2>
    <div class="services-container">
      <div class="service-text">
        <h3>–ü—Ä–æ—Å—Ç—ñ—Ä –±–µ–∑ —Ç—É—Ä–±–æ—Ç</h3>
        <p>–ú–∏ —Å—Ç–≤–æ—Ä–∏–ª–∏ –º—ñ—Å—Ü–µ, –¥–µ —Ç—ñ–ª–æ –≤—ñ–¥–Ω–æ–≤–ª—é—î—Ç—å—Å—è, –∞ –¥—É–º–∫–∏ –∑–∞—Å–ø–æ–∫–æ—é—é—Ç—å—Å—è. –ù–∞—Å–æ–ª–æ–¥–∂—É–π—Ç–µ—Å—å –∫–æ–∂–Ω–æ—é —Ö–≤–∏–ª–∏–Ω–æ—é:</p>
        <ul>
          <li>–í—ñ–¥–∫—Ä–∏—Ç–∏–π –±–∞—Å–µ–π–Ω —Å–µ—Ä–µ–¥ –∫—Ä–æ–Ω –¥–µ—Ä–µ–≤ (t +28¬∞C);</li>
          <li>–ê–≤—Ç–æ—Ä—Å—å–∫—ñ SPA-—Ä–∏—Ç—É–∞–ª–∏ —Ç–∞ –ª–∞–∑–Ω—è –Ω–∞ –¥—Ä–æ–≤–∞—Ö;</li>
          <li>–ü—Ä–æ–≥—É–ª—è–Ω–∫–∏ –Ω–∞ –∫–≤–∞–¥—Ä–æ—Ü–∏–∫–ª–∞—Ö –ª—ñ—Å–æ–≤–∏–º–∏ —Å—Ç–µ–∂–∫–∞–º–∏;</li>
          <li>–ü—Ä–∏–≤–∞—Ç–Ω—ñ –∞–ª—å—Ç–∞–Ω–∫–∏ –±–∞—Ä–±–µ–∫—é –±—ñ–ª—è –≤–æ–¥–∏.</li>
        </ul>
      </div>
      <div class="service-img">
        <img src="https://images.unsplash.com/photo-1544161515-4ab6ce6db874?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="SPA –≤ –ª—ñ—Å—ñ">
      </div>
    </div>
  </section>

  <section id="kitchen" class="section">
    <h2 class="section-title">–ì–∞—Å—Ç—Ä–æ–Ω–æ–º—ñ—á–Ω—ñ –í—Ä–∞–∂–µ–Ω–Ω—è</h2>
    <div class="services-container reverse">
      <div class="service-text">
        <h3>–†–µ—Å—Ç–æ—Ä–∞–Ω "–õ—ñ—Å–æ–≤–∏–π –ì—É—Ä–º–∞–Ω"</h3>
        <p>–°–º–∞–∫ —Å–ø—Ä–∞–≤–∂–Ω—å–æ—ó –ø—Ä–∏—Ä–æ–¥–∏ –Ω–∞ –≤–∞—à—ñ–π —Ç–∞—Ä—ñ–ª—Ü—ñ. –ù–∞—à —à–µ—Ñ-–∫—É—Ö–∞—Ä —Å—Ç–≤–æ—Ä—é—î —à–µ–¥–µ–≤—Ä–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ª–æ–∫–∞–ª—å–Ω—ñ —Ñ–µ—Ä–º–µ—Ä—Å—å–∫—ñ –ø—Ä–æ–¥—É–∫—Ç–∏ –•–∞—Ä–∫—ñ–≤—â–∏–Ω–∏ —Ç–∞ –¥–∞—Ä–∏ –ª—ñ—Å—É.</p>
        <ul>
          <li>–°–Ω—ñ–¥–∞–Ω–∫–∏ a la carte –∑ –≤–∏–¥–æ–º –Ω–∞ –ª—ñ—Å (–≤—Ö–æ–¥—è—Ç—å —É –≤–∞—Ä—Ç—ñ—Å—Ç—å);</li>
          <li>–°—Ç—Ä–∞–≤–∏ –Ω–∞ –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–æ–≥–Ω—ñ —Ç–∞ –∞–≤—Ç–æ—Ä—Å—å–∫–µ –≥—Ä–∏–ª—å-–º–µ–Ω—é;</li>
          <li>–ö–æ–ª–µ–∫—Ü—ñ—è –≤–∏—Ç—Ä–∏–º–∞–Ω–∏—Ö –≤–∏–Ω —Ç–∞ –∫—Ä–∞—Ñ—Ç–æ–≤–∏—Ö –Ω–∞—Å—Ç–æ—è–Ω–æ–∫;</li>
          <li>–û—Ä–≥–∞–Ω—ñ—á–Ω–µ –¥–∏—Ç—è—á–µ –º–µ–Ω—é —Ç–∞ —Ñ—ñ—Ä–º–æ–≤—ñ –¥–µ—Å–µ—Ä—Ç–∏.</li>
        </ul>
      </div>
      <div class="service-img">
        <img src="https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="–†–µ—Å—Ç–æ—Ä–∞–Ω">
      </div>
    </div>
  </section>

  <section id="contacts" class="section">
    <h2 class="section-title">–ó–Ω–∞–π—Ç–∏ –Ω–∞—Å</h2>
    <div class="contacts-wrapper">
      <div class="contacts-content">
        <h3>–í–∞—à–∞ –≤—Ç–µ—á–∞ –∑ –º—ñ—Å—Ç–∞</h3>
        <p>üìç –•–∞—Ä–∫—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å, –ó–∞–ø–æ–≤—ñ–¥–Ω–∞ –∑–æ–Ω–∞ "–õ—ñ—Å–æ–ø–∞—Ä–∫"</p>
        <p>–ú–∏ –ø–æ–¥–±–∞–ª–∏ –ø—Ä–æ –∫–æ–∂–Ω—É –¥–µ—Ç–∞–ª—å –≤–∞—à–æ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç—É.</p>
        <p>üöó VIP-—Ç—Ä–∞–Ω—Å—Ñ–µ—Ä –∑ —Ü–µ–Ω—Ç—Ä—É –•–∞—Ä–∫–æ–≤–∞</p>
        <span>üìß booking@forestpark.kh.ua</span>
      </div>
    </div>
  </section>

  <section class="section" style="background-color:#fcfcfc;">
    <h2 class="section-title">–í–∞—à–µ –æ—Å—Ç–∞–Ω–Ω—î –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è</h2>
    <div class="table-container" style="max-width:700px;">
      <div id="lastBookingBox" style="display:none;">
        <p style="margin:0 0 10px 0;"><strong>ID –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è:</strong> <span id="lastBookingId"></span></p>
        <p style="margin:0 0 10px 0;"><strong>–ù–æ–º–µ—Ä:</strong> <span id="lastBookingRoom"></span></p>
        <p style="margin:0 0 10px 0;"><strong>–î–∞—Ç–∏:</strong> <span id="lastBookingDates"></span></p>
        <p style="margin:0;"><strong>–ö–æ–Ω—Ç–∞–∫—Ç:</strong> <span id="lastBookingName"></span>, <span id="lastBookingPhone"></span></p>
      </div>

      <div id="noLastBooking" style="color:#666; font-size:14px;">
        –ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–∏—Ö –±—Ä–æ–Ω—é–≤–∞–Ω—å.
      </div>
    </div>
  </section>

  <footer>
    <p>&copy; 2025 Forest Park Resort. –°—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∏—Ä–æ–¥–æ—é, –≤–¥–æ—Å–∫–æ–Ω–∞–ª–µ–Ω–æ –Ω–∞–º–∏.</p>
  </footer>

  <div id="lightbox" class="lightbox">
    <span class="lightbox-close" id="lightboxClose">&times;</span>
    <div class="lightbox-content-wrapper">
      <button class="lightbox-btn lb-prev" id="lbPrev">&#10094;</button>
      <img id="lightbox-img" src="" alt="–ó–±—ñ–ª—å—à–µ–Ω–µ —Ñ–æ—Ç–æ">
      <button class="lightbox-btn lb-next" id="lbNext">&#10095;</button>
    </div>
  </div>

  <div id="customAlert" class="custom-alert-overlay">
    <div class="custom-alert-box">
      <span class="alert-close-btn" id="alertCloseX">&times;</span>
      <h3>–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</h3>
      <p id="customAlertText">–¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...</p>
    </div>
  </div>

  <div id="bookingModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" id="modalCloseBtn">&times;</span>
      <h2 class="form-title">–ë—Ä–æ–Ω—é–≤–∞–Ω–Ω—è</h2>

      <form id="bookingForm">
        <div class="form-row">
          <div class="form-group">
            <label>–Ü–º'—è</label>
            <input type="text" id="inpName" placeholder="–û–ª–µ–Ω–∞" required>
          </div>
          <div class="form-group">
            <label>–ü—Ä—ñ–∑–≤–∏—â–µ</label>
            <input type="text" id="inpSurname" placeholder="–ö–æ–≤–∞–ª–µ–Ω–∫–æ" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
            <input type="tel" id="phoneInput" placeholder="+380..." maxlength="13" required>
          </div>
          <div class="form-group">
            <label>–û–±–µ—Ä—ñ—Ç—å –Ω–æ–º–µ—Ä</label>
            <select id="roomSelect" required>
              <option value="Scandi Studio">Scandi Studio</option>
              <option value="Forest Spa Suite">Forest Spa Suite</option>
              <option value="Family Villa">Family Villa</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>–ó–∞—ó–∑–¥</label>
            <input type="text" id="checkIn" placeholder="–û–±–µ—Ä—ñ—Ç—å –¥–∞—Ç—É" required>
          </div>
          <div class="form-group">
            <label>–í–∏—ó–∑–¥</label>
            <input type="text" id="checkOut" placeholder="–û–±–µ—Ä—ñ—Ç—å –¥–∞—Ç—É" required disabled>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>–ì–æ—Å—Ç–µ–π</label>
            <input type="number" id="inpGuests" min="1" max="2" value="2" required>
          </div>
          <div class="form-group">
            <label>–ü–æ–≤–µ—Ä—Ö</label>
            <select id="selFloor">
              <option value="1">1-–π</option>
              <option value="2">2-–π</option>
              <option value="any">–ë—É–¥—å-—è–∫–∏–π</option>
            </select>
          </div>
        </div>

        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="chkAC" checked> –ö–æ–Ω–¥–∏—Ü—ñ–æ–Ω–µ—Ä
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="chkFridge" checked> –•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫
          </label>
        </div>

        <div class="btn-row">
          <button type="button" class="btn-clear" id="clearFormBtn">–û—á–∏—Å—Ç–∏—Ç–∏</button>
          <button type="submit" class="btn-submit">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏</button>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://npmcdn.com/flatpickr/dist/l10n/uk.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {

      /* --- 0. –î–ê–ù–Ü –ü–†–û –ù–û–ú–ï–†–ò --- */
      const roomsData = {
        "Scandi Studio": { minGuests: 1, maxGuests: 2, booked: [{ from: "2025-11-25", to: "2025-11-27" }, { from: "2025-12-30", to: "2026-01-02" }] },
        "Forest Spa Suite": { minGuests: 1, maxGuests: 2, booked: [{ from: "2025-12-01", to: "2025-12-05" }] },
        "Family Villa": { minGuests: 2, maxGuests: 6, booked: [{ from: "2025-12-15", to: "2025-12-18" }] }
      };

      /* --- –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω—ñ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è (–ø–æ—Å—Ç—ñ–π–Ω–æ) --- */
      const BOOKINGS_KEY = "fp_confirmed_bookings_v1";

      function loadConfirmedBookings() {
        const raw = localStorage.getItem(BOOKINGS_KEY);
        if (!raw) return;
        try {
          const saved = JSON.parse(raw);
          Object.keys(saved).forEach(roomName => {
            if (roomsData[roomName]) {
              roomsData[roomName].booked = saved[roomName] || [];
            }
          });
        } catch {}
      }

      function saveConfirmedBookings() {
        const toSave = {};
        Object.keys(roomsData).forEach(roomName => {
          toSave[roomName] = roomsData[roomName].booked || [];
        });
        localStorage.setItem(BOOKINGS_KEY, JSON.stringify(toSave));
      }

      /* --- ID + –æ—Å—Ç–∞–Ω–Ω—î –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è --- */
      const BOOKING_ID_COUNTER_KEY = "fp_booking_id_counter_v1";
      const LAST_BOOKING_KEY = "fp_last_booking_v1";

      function nextBookingId() {
        const current = parseInt(localStorage.getItem(BOOKING_ID_COUNTER_KEY) || "1000", 10);
        const next = current + 1;
        localStorage.setItem(BOOKING_ID_COUNTER_KEY, String(next));
        return "FP-" + next;
      }

      function saveLastBooking(data) {
        localStorage.setItem(LAST_BOOKING_KEY, JSON.stringify(data));
      }

      function loadLastBooking() {
        const raw = localStorage.getItem(LAST_BOOKING_KEY);
        if (!raw) return null;
        try { return JSON.parse(raw); } catch { return null; }
      }

      function renderLastBooking() {
        const d = loadLastBooking();
        const box = document.getElementById("lastBookingBox");
        const empty = document.getElementById("noLastBooking");

        if (!d) {
          box.style.display = "none";
          empty.style.display = "block";
          return;
        }

        document.getElementById("lastBookingId").textContent = d.id;
        document.getElementById("lastBookingRoom").textContent = d.room;
        document.getElementById("lastBookingDates").textContent = `${d.checkIn} ‚Äî ${d.checkOut}`;
        document.getElementById("lastBookingName").textContent = `${d.name} ${d.surname}`;
        document.getElementById("lastBookingPhone").textContent = d.phone;

        empty.style.display = "none";
        box.style.display = "block";
      }

      const DRAFT_KEY = "fp_booking_draft_v1";
      let bookingConfirmed = false;

      const draftFields = [
        "inpName", "inpSurname", "phoneInput",
        "roomSelect", "checkIn", "checkOut",
        "inpGuests", "selFloor", "chkAC", "chkFridge"
      ];

      function collectDraft() {
        return {
          inpName: document.getElementById("inpName").value.trim(),
          inpSurname: document.getElementById("inpSurname").value.trim(),
          phoneInput: document.getElementById("phoneInput").value.trim(),
          roomSelect: document.getElementById("roomSelect").value,
          checkIn: document.getElementById("checkIn").value.trim(),
          checkOut: document.getElementById("checkOut").value.trim(),
          inpGuests: document.getElementById("inpGuests").value,
          selFloor: document.getElementById("selFloor").value,
          chkAC: document.getElementById("chkAC").checked,
          chkFridge: document.getElementById("chkFridge").checked
        };
      }

      function hasAnyDraftData(d) {
        if (!d) return false;
        return (
          d.inpName !== "" ||
          d.inpSurname !== "" ||
          (d.phoneInput && d.phoneInput !== "+38") ||
          d.checkIn !== "" ||
          d.checkOut !== "" ||
          String(d.inpGuests || "").trim() !== "" ||
          String(d.selFloor || "").trim() !== ""
        );
      }

      function saveDraft() {
        if (bookingConfirmed) return;
        const d = collectDraft();
        if (hasAnyDraftData(d)) localStorage.setItem(DRAFT_KEY, JSON.stringify(d));
        else localStorage.removeItem(DRAFT_KEY);
      }

      function clearDraft() { localStorage.removeItem(DRAFT_KEY); }

      function loadDraft() {
        const raw = localStorage.getItem(DRAFT_KEY);
        if (!raw) return null;
        try { return JSON.parse(raw); } catch { return null; }
      }

      function attachDraftAutosave() {
        draftFields.forEach(id => {
          const el = document.getElementById(id);
          if (!el) return;
          const evt = (el.type === "checkbox" || el.tagName === "SELECT") ? "change" : "input";
          el.addEventListener(evt, saveDraft);
        });
      }

      function applyDraftToForm(d, initCalendarsFn, updateGuestLimitsFn) {
        if (!d) return;

        document.getElementById("inpName").value = d.inpName || "";
        document.getElementById("inpSurname").value = d.inpSurname || "";
        document.getElementById("phoneInput").value = d.phoneInput || "";

        if (d.roomSelect && roomsData[d.roomSelect]) {
          document.getElementById("roomSelect").value = d.roomSelect;
        }

        document.getElementById("inpGuests").value = d.inpGuests ?? document.getElementById("inpGuests").value;
        document.getElementById("selFloor").value = d.selFloor || "any";
        document.getElementById("chkAC").checked = (d.chkAC !== undefined) ? d.chkAC : true;
        document.getElementById("chkFridge").checked = (d.chkFridge !== undefined) ? d.chkFridge : true;

        initCalendarsFn(document.getElementById("roomSelect").value);
        updateGuestLimitsFn();

        if (d.checkIn) {
          document.getElementById("checkIn").value = d.checkIn;
          document.getElementById("checkOut").disabled = false;
        }
        if (d.checkOut) document.getElementById("checkOut").value = d.checkOut;
      }

      /* --- –ê–Ω—ñ–º–∞—Ü—ñ—è --- */
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          const homeContent = document.getElementById('homeContent');
          const galleryBlock = document.getElementById('gallery-block');
          if (entry.isIntersecting) {
            homeContent.classList.add('visible');
            setTimeout(() => galleryBlock.classList.add('visible'), 4000);
          } else {
            homeContent.classList.remove('visible');
            galleryBlock.classList.remove('visible');
          }
        });
      }, { threshold: 0.2 });
      observer.observe(document.getElementById('home'));

      /* --- –°–ª–∞–π–¥–µ—Ä --- */
      const slidesData = ['lobby-bar.jpg','restoraunt.jpg','biblioteka.jpg','spa-out.jpg'];
      let currentSlide = 0;
      const totalSlides = slidesData.length;
      const sliderTrack = document.getElementById('sliderTrack');
      const indicatorsContainer = document.getElementById('indicators');

      function updateSlider() {
        sliderTrack.style.transform = `translateX(${-currentSlide * 100}%)`;
        Array.from(indicatorsContainer.children).forEach((dot, idx) => {
          dot.classList.toggle('active', idx === currentSlide);
        });
      }

      slidesData.forEach((_, index) => {
        const dot = document.createElement('div');
        dot.classList.add('indicator');
        if (index === 0) dot.classList.add('active');
        dot.addEventListener('click', () => { currentSlide = index; updateSlider(); });
        indicatorsContainer.appendChild(dot);
      });

      document.getElementById('prevSlideBtn').addEventListener('click', () => {
        currentSlide = (currentSlide > 0) ? currentSlide - 1 : totalSlides - 1;
        updateSlider();
      });
      document.getElementById('nextSlideBtn').addEventListener('click', () => {
        currentSlide = (currentSlide < totalSlides - 1) ? currentSlide + 1 : 0;
        updateSlider();
      });

      /* --- Lightbox --- */
      const lightbox = document.getElementById('lightbox');
      const lightboxImg = document.getElementById('lightbox-img');
      let lbIndex = 0;

      function openLightbox(index) {
        lbIndex = index;
        updateLbImage();
        lightbox.style.display = 'flex';
      }

      function updateLbImage() {
        lightboxImg.style.opacity = 0;
        setTimeout(() => {
          lightboxImg.src = slidesData[lbIndex];
          lightboxImg.style.opacity = 1;
        }, 150);
      }

      document.querySelectorAll('.slide').forEach((slide, index) => {
        slide.addEventListener('click', () => openLightbox(index));
      });

      document.getElementById('lightboxClose').addEventListener('click', () => lightbox.style.display = 'none');
      document.getElementById('lbPrev').addEventListener('click', () => {
        lbIndex = (lbIndex > 0) ? lbIndex - 1 : totalSlides - 1;
        updateLbImage();
      });
      document.getElementById('lbNext').addEventListener('click', () => {
        lbIndex = (lbIndex < totalSlides - 1) ? lbIndex + 1 : 0;
        updateLbImage();
      });

      /* --- –ë—Ä–æ–Ω—é–≤–∞–Ω–Ω—è --- */
      const modal = document.getElementById('bookingModal');
      const form = document.getElementById('bookingForm');
      const roomSelect = document.getElementById('roomSelect');
      const guestInput = document.getElementById('inpGuests');
      let checkInPicker, checkOutPicker;

      function updateGuestLimits() {
        const room = roomSelect.value;
        const config = roomsData[room];
        guestInput.min = config.minGuests;
        guestInput.max = config.maxGuests;
        if (guestInput.value < config.minGuests) guestInput.value = config.minGuests;
        if (guestInput.value > config.maxGuests) guestInput.value = config.maxGuests;
      }

      // ‚úÖ FIX: Flatpickr disable ranges as Date objects
      function normalizeDisabledRanges(roomType) {
        const ranges = (roomsData[roomType]?.booked || []);
        return ranges
          .filter(r => r && r.from && r.to)
          .map(r => ({
            from: new Date(r.from + "T00:00:00"),
            to: new Date(r.to + "T00:00:00")
          }));
      }

      function initCalendars(roomType) {
        const disabled = normalizeDisabledRanges(roomType);

        if (checkInPicker) checkInPicker.destroy();
        checkInPicker = flatpickr("#checkIn", {
          locale: "uk",
          dateFormat: "Y-m-d",
          minDate: "today",
          disable: disabled,
          position: "above",
          onChange: function(selectedDates) {
            const checkout = document.getElementById('checkOut');
            checkout.disabled = false;
            checkout.value = "";

            let minOut = new Date(selectedDates[0]);
            minOut.setDate(minOut.getDate() + 1);

            if (checkOutPicker) checkOutPicker.destroy();
            checkOutPicker = flatpickr("#checkOut", {
              locale: "uk",
              dateFormat: "Y-m-d",
              minDate: minOut,
              disable: disabled,
              position: "above",
              onDayCreate: (dObj, dStr, fp, dayElem) => {
                if (selectedDates[0] && dayElem.dateObj.getTime() === selectedDates[0].getTime()) {
                  dayElem.classList.add('checkin-date-marker');
                }
              },
              onChange: () => saveDraft()
            });

            setTimeout(() => checkOutPicker.open(), 100);
            saveDraft();
          }
        });

        if (checkOutPicker) checkOutPicker.destroy();
        checkOutPicker = flatpickr("#checkOut", {
          locale: "uk",
          dateFormat: "Y-m-d",
          minDate: "today",
          disable: disabled,
          position: "above",
          onChange: () => saveDraft()
        });
      }

      function closeModal() { modal.style.display = 'none'; }

      function openModal(roomType) {
        modal.style.display = 'flex';
        if (roomType) roomSelect.value = roomType;

        initCalendars(roomSelect.value);
        updateGuestLimits();

        const d = loadDraft();
        if (d && hasAnyDraftData(d)) {
          applyDraftToForm(d, initCalendars, updateGuestLimits);
        }
      }

      /* --- –°—Ç–∞—Ä—Ç: –ø—ñ–¥—Ç—è–≥–Ω—É—Ç–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω—ñ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è + –æ—Å—Ç–∞–Ω–Ω—î --- */
      loadConfirmedBookings();
      renderLastBooking();

      /* --- –ù–∞–≤—ñ–≥–∞—Ü—ñ—è --- */
      document.getElementById('navBookBtn').addEventListener('click', () => openModal());
      document.getElementById('heroBtn').addEventListener('click', () => document.getElementById('cottages').scrollIntoView());

      document.querySelectorAll('.room-book-btn').forEach(btn => {
        btn.addEventListener('click', (e) => openModal(e.target.dataset.room));
      });

      document.querySelectorAll('.menu a').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) target.scrollIntoView({ behavior: 'smooth' });
        });
      });

      /* --- –ó–∞–∫—Ä–∏—Ç—Ç—è --- */
      document.getElementById('modalCloseBtn').addEventListener('click', closeModal);
      document.getElementById('alertCloseX').addEventListener('click', () => {
        document.getElementById('customAlert').style.display = 'none';
      });
      window.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
        if (e.target === document.getElementById('customAlert')) document.getElementById('customAlert').style.display = 'none';
      });

      /* --- –û—á–∏—Å—Ç–∏—Ç–∏ --- */
      document.getElementById('clearFormBtn').addEventListener('click', () => {
        form.reset();
        initCalendars(roomSelect.value);
        updateGuestLimits();
        clearDraft();
      });

      /* --- –ó–º—ñ–Ω–∞ –Ω–æ–º–µ—Ä–∞ --- */
      roomSelect.addEventListener('change', () => {
        document.getElementById('checkIn').value = "";
        document.getElementById('checkOut').value = "";
        initCalendars(roomSelect.value);
        updateGuestLimits();
        saveDraft();
      });

      /* --- Submit --- */
      form.addEventListener('submit', (e) => {
        e.preventDefault();

        if (!form.checkValidity()) {
          form.reportValidity();
          return;
        }

        const room = roomSelect.value;
        const checkInVal = document.getElementById('checkIn').value;
        const checkOutVal = document.getElementById('checkOut').value;

        if (!checkInVal || !checkOutVal) {
          document.getElementById('customAlertText').innerText = '–ë—É–¥—å –ª–∞—Å–∫–∞, –æ–±–µ—Ä—ñ—Ç—å –¥–∞—Ç–∏ –∑–∞—ó–∑–¥—É —Ç–∞ –≤–∏—ó–∑–¥—É.';
          document.getElementById('customAlert').style.display = 'flex';
          return;
        }

        const bookingId = nextBookingId();

        bookingConfirmed = true;
        clearDraft();

        roomsData[room].booked = roomsData[room].booked || [];
        roomsData[room].booked.push({ from: checkInVal, to: checkOutVal });
        saveConfirmedBookings();

        const last = {
          id: bookingId,
          room,
          checkIn: checkInVal,
          checkOut: checkOutVal,
          name: document.getElementById("inpName").value.trim(),
          surname: document.getElementById("inpSurname").value.trim(),
          phone: document.getElementById("phoneInput").value.trim()
        };
        saveLastBooking(last);
        renderLastBooking();

        // ‚úÖ –û–Ω–æ–≤–∏—Ç–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—ñ, —â–æ–± –Ω–æ–≤—ñ –¥–∞—Ç–∏ —Å—Ç–∞–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–º–∏
        initCalendars(roomSelect.value);
        updateGuestLimits();

        document.getElementById('customAlertText').innerText =
          `‚úÖ –ë—Ä–æ–Ω—é–≤–∞–Ω–Ω—è —É—Å–ø—ñ—à–Ω–µ!\nID: ${bookingId}\n–ù–æ–º–µ—Ä: ${room}\n–î–∞—Ç–∏: ${checkInVal} ‚Äî ${checkOutVal}\n–ú–∏ –∑–≤'—è–∂–µ–º–æ—Å—è –∑ –≤–∞–º–∏ –Ω–∞–π–±–ª–∏–∂—á–∏–º —á–∞—Å–æ–º.`;
        document.getElementById('customAlert').style.display = 'flex';

        form.reset();
        closeModal();

        setTimeout(() => { bookingConfirmed = false; }, 0);
      });

      /* --- Phone Mask --- */
      const phoneInput = document.getElementById('phoneInput');
      phoneInput.addEventListener('focus', function() { if (this.value === '') this.value = '+38'; });
      phoneInput.addEventListener('input', function() {
        let val = this.value;
        if (!val.startsWith('+38')) val = '+38';
        let nums = val.substring(3).replace(/\D/g, '');
        if (nums.length > 10) nums = nums.substring(0, 10);
        this.value = '+38' + nums;
        saveDraft();
      });

      /* --- –ü–ó-6: –∞–≤—Ç–æ–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è + –ø—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —á–µ—Ä–Ω–µ—Ç–∫–∏ --- */
      attachDraftAutosave();

      const existingDraft = loadDraft();
      if (existingDraft && hasAnyDraftData(existingDraft)) {
        applyDraftToForm(existingDraft, initCalendars, updateGuestLimits);
      }

      window.addEventListener("beforeunload", () => {
        if (!bookingConfirmed) saveDraft();
      });

    });
  </script>
</body>
</html>
